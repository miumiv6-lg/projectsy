<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project SY</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body {
      width: 100%; height: 100%;
      overflow: hidden;
      background: #000;
      color: #fff;
      font-family: 'Inter', -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
      user-select: none;
    }

    .container {
      width: 100%; height: 100%;
      position: relative;
    }

    .bg-video {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0.6;
    }

    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.4);
    }

    /* Animations */
    @keyframes ios-slide-up {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-ios-slide-up {
      animation: ios-slide-up 0.6s cubic-bezier(0.32, 0.72, 0, 1) forwards;
    }

    /* Screens */
    .screen {
      display: none;
      position: absolute;
      inset: 0;
      z-index: 50;
    }
    .screen.active { display: flex; }

    /* ========== CLICK TO START ========== */
    #clickScreen {
      cursor: pointer;
      align-items: center;
      justify-content: center;
    }

    .top-logo {
      position: absolute;
      top: 32px;
      right: 32px;
      display: flex;
      align-items: center;
      gap: 16px;
      background: #1C1C1E;
      padding: 12px 20px;
      border-radius: 16px;
    }

    .top-logo-text { text-align: right; }
    .top-logo-text .name { font-size: 20px; font-weight: 700; }
    .top-logo-text .mode { font-size: 12px; color: #007AFF; text-transform: uppercase; letter-spacing: 2px; font-weight: 500; }
    .top-logo img { width: 48px; height: 48px; border-radius: 12px; object-fit: cover; }

    .click-center { text-align: center; }

    .click-icon-box {
      width: 96px; height: 96px;
      background: #1C1C1E;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      transition: background 0.2s;
    }

    .click-center:hover .click-icon-box { background: #2C2C2E; }

    .click-title {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .click-subtitle {
      color: #007AFF;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 4px;
      font-size: 14px;
    }

    /* ========== SPAWN SELECTION ========== */
    #spawnScreen {
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .spawn-top-left {
      position: absolute;
      top: 24px;
      left: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .spawn-top-left img { width: 40px; height: 40px; border-radius: 12px; }
    .spawn-top-left .name { font-weight: 700; }
    .spawn-top-left .mode { font-size: 12px; color: #6B6B6B; }

    .spawn-top-right {
      position: absolute;
      top: 24px;
      right: 24px;
      display: flex;
      gap: 12px;
    }

    .stat-box {
      background: #1C1C1E;
      border-radius: 12px;
      padding: 8px 16px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stat-box .dot { width: 8px; height: 8px; border-radius: 50%; background: #34C759; }

    .spawn-bottom-right {
      position: absolute;
      bottom: 24px;
      right: 24px;
      text-align: right;
    }

    .spawn-bottom-right .date { font-size: 14px; color: #6B6B6B; }
    .spawn-bottom-right .time { font-size: 32px; font-weight: 300; }

    /* Spawn Modal */
    .spawn-modal {
      width: 100%;
      max-width: 500px;
      background: #1C1C1E;
      border-radius: 16px;
      padding: 24px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
    }

    .spawn-header { text-align: center; margin-bottom: 20px; }
    .spawn-header h2 { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
    .spawn-header p { font-size: 14px; color: #6B6B6B; }

    /* Filter Tabs */
    .filter-tabs {
      display: flex;
      gap: 8px;
      background: #2C2C2E;
      border-radius: 12px;
      padding: 4px;
      margin-bottom: 16px;
    }

    .filter-tab {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background: transparent;
      color: #6B6B6B;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .filter-tab:hover { color: #fff; }
    .filter-tab.active { background: #007AFF; color: #fff; }
    .filter-tab.active.green { background: #34C759; }

    /* Spawn List */
    .spawn-list {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .spawn-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: #2C2C2E;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      width: 100%;
      text-align: left;
      font-family: inherit;
      color: #fff;
    }

    .spawn-item:hover { background: #007AFF; }

    .spawn-item-icon {
      width: 40px; height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .spawn-item.driver .spawn-item-icon { background: rgba(0,122,255,0.2); color: #007AFF; }
    .spawn-item.passenger .spawn-item-icon { background: rgba(52,199,89,0.2); color: #34C759; }
    .spawn-item:hover .spawn-item-icon { background: rgba(255,255,255,0.2); color: #fff; }

    .spawn-item-info { flex: 1; }
    .spawn-item-info .title { font-weight: 500; margin-bottom: 2px; }
    .spawn-item-info .desc { font-size: 13px; color: #6B6B6B; }
    .spawn-item:hover .spawn-item-info .desc { color: rgba(255,255,255,0.7); }

    .spawn-item-arrow { color: #3C3C3E; font-size: 18px; }
    .spawn-item:hover .spawn-item-arrow { color: #fff; }
  </style>
</head>
<body>
  <div class="container">
    <video class="bg-video" autoplay muted loop playsinline>
      <source src="https://cdn.pixabay.com/video/2019/04/23/23011-332483109_large.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <!-- AUDIO -->
    <audio id="bgMusic" preload="auto"></audio>


    <!-- ========== CLICK TO START ========== -->
    <div class="screen active animate-ios-slide-up" id="clickScreen" onclick="showSpawnScreen()">
      <div class="top-logo">
        <div class="top-logo-text">
          <div class="name">Project SY</div>
          <div class="mode">Metrostroi NoRank</div>
        </div>
        <img src="https://i.ibb.co/Xf2nNn4H/photo-2025-12-03-19-30-54.jpg" alt="Logo">
      </div>

      <div class="click-center">
        <div class="click-icon-box">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
            <rect x="5" y="2" width="14" height="20" rx="7" stroke="white" stroke-width="2"/>
            <path d="M12 2V10" stroke="white" stroke-width="2"/>
            <path d="M5 10H19" stroke="white" stroke-width="2"/>
            <path d="M5 9C5 5.13401 8.13401 2 12 2V10H5V9Z" fill="#007AFF"/>
          </svg>
        </div>
        <h1 class="click-title">–ù–∞–∂–º–∏—Ç–µ –õ–ö–ú</h1>
        <p class="click-subtitle">–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É</p>
      </div>
    </div>

    <!-- ========== SPAWN SELECTION ========== -->
    <div class="screen" id="spawnScreen">
      <div class="spawn-top-left">
        <img src="https://i.ibb.co/Xf2nNn4H/photo-2025-12-03-19-30-54.jpg" alt="Logo">
        <div>
          <div class="name">Project SY</div>
          <div class="mode">Metrostroi</div>
        </div>
      </div>

      <div class="spawn-top-right">
        <div class="stat-box"><div class="dot"></div><span id="pingValue">24 ms</span></div>
        <div class="stat-box">FPS <span id="fpsValue">120</span></div>
      </div>

      <div class="spawn-bottom-right">
        <div class="date" id="dateValue"></div>
        <div class="time" id="timeValue"></div>
      </div>

      <div class="spawn-modal animate-ios-slide-up">
        <div class="spawn-header">
          <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–∞–≤–Ω</h2>
          <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ</p>
        </div>

        <div class="filter-tabs">
          <button class="filter-tab active" onclick="filterSpawns('all', this)">–í—Å–µ</button>
          <button class="filter-tab" onclick="filterSpawns('driver', this)">üöá –ú–∞—à–∏–Ω–∏—Å—Ç</button>
          <button class="filter-tab" onclick="filterSpawns('passenger', this)">üë§ –ü–∞—Å—Å–∞–∂–∏—Ä</button>
        </div>

        <div class="spawn-list" id="spawnList">
          <button class="spawn-item driver" data-type="driver" onclick="selectSpawn('–¢–ß-1 –õ–∏—Ö–æ–±–æ—Ä—ã')">
            <div class="spawn-item-icon">üöá</div>
            <div class="spawn-item-info">
              <div class="title">–¢–ß-1 ¬´–õ–∏—Ö–æ–±–æ—Ä—ã¬ª</div>
              <div class="desc">–≠–ª–µ–∫—Ç—Ä–æ–¥–µ–ø–æ. –°–ø–∞–≤–Ω —Å–æ—Å—Ç–∞–≤–æ–≤.</div>
            </div>
            <div class="spawn-item-arrow">‚Ä∫</div>
          </button>

          <button class="spawn-item driver" data-type="driver" onclick="selectSpawn('–¢—É–ø–∏–∫ –§–∏–∑—Ç–µ—Ö')">
            <div class="spawn-item-icon">üöá</div>
            <div class="spawn-item-info">
              <div class="title">–¢—É–ø–∏–∫ —Å—Ç. –§–∏–∑—Ç–µ—Ö</div>
              <div class="desc">–û–±–æ—Ä–æ—Ç–Ω—ã–π —Ç—É–ø–∏–∫. –°–º–µ–Ω–∞ –∫–∞–±–∏–Ω—ã.</div>
            </div>
            <div class="spawn-item-arrow">‚Ä∫</div>
          </button>

          <button class="spawn-item passenger" data-type="passenger" onclick="selectSpawn('–°—Ç. –õ–∏–∞–Ω–æ–∑–æ–≤–æ')">
            <div class="spawn-item-icon">üìç</div>
            <div class="spawn-item-info">
              <div class="title">–°—Ç. –õ–∏–∞–Ω–æ–∑–æ–≤–æ</div>
              <div class="desc">–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</div>
            </div>
            <div class="spawn-item-arrow">‚Ä∫</div>
          </button>

          <button class="spawn-item passenger" data-type="passenger" onclick="selectSpawn('–°—Ç. –§–∏–∑—Ç–µ—Ö')">
            <div class="spawn-item-icon">üìç</div>
            <div class="spawn-item-info">
              <div class="title">–°—Ç. –§–∏–∑—Ç–µ—Ö</div>
              <div class="desc">–ö–æ–Ω–µ—á–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è</div>
            </div>
            <div class="spawn-item-arrow">‚Ä∫</div>
          </button>

          <button class="spawn-item passenger" data-type="passenger" onclick="selectSpawn('–°—Ç. –Ø—Ö—Ä–æ–º—Å–∫–∞—è')">
            <div class="spawn-item-icon">üìç</div>
            <div class="spawn-item-info">
              <div class="title">–°—Ç. –Ø—Ö—Ä–æ–º—Å–∫–∞—è</div>
              <div class="desc">–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</div>
            </div>
            <div class="spawn-item-arrow">‚Ä∫</div>
          </button>
        </div>
      </div>
    </div>
  </div>


  <script>
    // ========== MUSIC ==========
    const MUSIC_TRACKS = [
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/favela.mp3",
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/nobatidao.flac",
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/apart.mp3",
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/scars.mp3",
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/hotncold.mp3",
      "https://miumiv6-lg.github.io/projectsy/gmod_ingame/music/fnaf.mp3",
    ];

    let playedTracks = [];
    const audio = document.getElementById('bgMusic');
    const TARGET_VOLUME = 0.15;
    const FADE_DURATION = 3000;

    function getRandomTrack() {
      if (playedTracks.length >= MUSIC_TRACKS.length) {
        playedTracks = [];
      }
      const available = MUSIC_TRACKS.filter(t => !playedTracks.includes(t));
      const track = available[Math.floor(Math.random() * available.length)];
      playedTracks.push(track);
      return track;
    }

    function fadeIn() {
      audio.volume = 0;
      const step = TARGET_VOLUME / (FADE_DURATION / 50);
      const interval = setInterval(() => {
        if (audio.volume < TARGET_VOLUME) {
          audio.volume = Math.min(TARGET_VOLUME, audio.volume + step);
        } else {
          clearInterval(interval);
        }
      }, 50);
    }

    function playMusic() {
      audio.src = getRandomTrack();
      audio.play().catch(() => {});
      fadeIn();
    }

    audio.addEventListener('ended', () => {
      audio.src = getRandomTrack();
      audio.play().catch(() => {});
      fadeIn();
    });

    // Start music on first click
    document.addEventListener('click', function startMusic() {
      playMusic();
      document.removeEventListener('click', startMusic);
    }, { once: true });

    // ========== TIME & STATS ==========
    function updateTime() {
      const now = new Date();
      const time = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit', timeZone: 'Europe/Moscow' });
      const date = now.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric', timeZone: 'Europe/Moscow' });
      document.getElementById('timeValue').textContent = time;
      document.getElementById('dateValue').textContent = date;
    }

    function updateStats() {
      document.getElementById('pingValue').textContent = Math.floor(Math.random() * 25 + 15) + ' ms';
      document.getElementById('fpsValue').textContent = Math.floor(Math.random() * 60 + 60);
    }

    updateTime();
    updateStats();
    setInterval(updateTime, 1000);
    setInterval(updateStats, 2000);

    // ========== SCREENS ==========
    function showSpawnScreen() {
      document.getElementById('clickScreen').classList.remove('active');
      document.getElementById('spawnScreen').classList.add('active');
      document.getElementById('spawnScreen').classList.add('animate-ios-slide-up');
    }

    function filterSpawns(type, btn) {
      document.querySelectorAll('.filter-tab').forEach(b => {
        b.classList.remove('active', 'green');
      });
      btn.classList.add('active');
      if (type === 'passenger') btn.classList.add('green');

      document.querySelectorAll('.spawn-item').forEach(item => {
        if (type === 'all' || item.dataset.type === type) {
          item.style.display = 'flex';
        } else {
          item.style.display = 'none';
        }
      });
    }

    function selectSpawn(name) {
      // Call GMod Lua
      if (typeof gmod !== 'undefined' && gmod.spawn) {
        gmod.spawn(name);
      } else {
        console.log('Spawn:', name);
        // Demo: just hide UI
        document.getElementById('spawnScreen').classList.remove('active');
      }
    }

    // ESC to close
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (typeof gmod !== 'undefined' && gmod.closeUI) {
          gmod.closeUI();
        }
      }
    });
  </script>
</body>
</html>
